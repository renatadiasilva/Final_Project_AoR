<ui:composition template="../../../WEB-INF/template/Layout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="Título">
		Admin - Pesquisas de Entrevistas
		 - #{styleSessionManagement.companyName}
	</ui:define>

	<ui:define name="contents">
		<h1>Pesquisas de Entrevistas</h1>

		<h:form id="interviewSearch">

			<h:panelGrid id="buttonsInterviewSearch" columns="7">

				<p:commandButton value="Todas entrevistas"
					action="#{interviewSearchCDI.searchAllInterviews()}" 
					update="@form, messages"
					icon="ui-icon-search" />

				<p:commandButton value="Entrevistas passadas entre duas datas"
					action="#{interviewSearchCDI.searchCarriedOutInterviews()}"
					update="@form, messages"
					icon="ui-icon-search" />

				<p:commandButton value="Entrevistas passadas (interv)"
					action="#{interviewSearchCDI.
						searchCarriedOutInterviewsByUser()}" 
					update="@form, messages"
					icon="ui-icon-search" />

				<p:commandButton value="Entrevistas agendadas (interv)"
					action="#{interviewSearchCDI.
						searchScheduledInterviewsByUser()}" 
					update="@form, messages"
					icon="ui-icon-search" />

				<p:commandButton value="Data ocupada? (interv)"
					action="#{interviewSearchCDI.
						checkInterviewerHasDateConflict()}"
						update="@form, messages"
					icon="ui-icon-search" />

				<p:commandButton value="Data ocupada? (candid)"
					action="#{interviewSearchCDI.
						checkCandidateHasDateConflict()}" 
						update="@form, messages"
					icon="ui-icon-search" />

				<p:commandButton value="Entrevistas (posição)"
					action="#{interviewSearchCDI.
						searchInterviewsByPosition()}" 
					update="@form, messages"
					icon="ui-icon-search" />

				<p:commandButton value="Entrevistas passadas (posição)"
					action="#{interviewSearchCDI.
						searchCarriedOutInterviewsByPosition()}"
					 update="@form, messages"
					icon="ui-icon-search" />

				<p:commandButton value="Entrevistas agendadas (posição)"
					action="#{interviewSearchCDI.
						searchScheduledInterviewsByPosition()}"
					 update="@form, messages"
					icon="ui-icon-search" />

				<p:commandButton value="Entrevistas agendadas (candid)"
					action="#{interviewSearchCDI.
						searchScheduledInterviewsByCandidate()}"
					 update="@form, messages"
					icon="ui-icon-search" />

				<p:commandButton value="Entrevistas (entrevistador)"
					action="#{interviewSearchCDI.searchInterviewsOfUser()}"
					 update="@form, messages"
					icon="ui-icon-search" />

				<p:commandButton value="Entrevistas (candidatura)"
					action="#{interviewSearchCDI.
						searchInterviewsOfSubmission()}"
					update="@form, messages"
					icon="ui-icon-search" />

				<p:commandButton value="Entrevistas passadas (guião)"
					action="#{interviewSearchCDI.
						searchCarriedOutInterviewsWithScript()}"
					update="@form, messages"
					icon="ui-icon-search" />

				<p:commandButton value="Entrevistas agendadas (guião)"
					action="#{interviewSearchCDI.
						searchScheduledInterviewsWithScript()}"
					update="@form, messages"
					icon="ui-icon-search" />

				<p:commandButton value="Remover entrevista"
					action="#{interviewSearchCDI.remove()}"
					update="@form, messages"
					icon="ui-icon-search" />

			</h:panelGrid>

			<h:panelGrid id="gridInterviewSearch" columns="8">

				<p:outputLabel value="Primeira Data: " for="search-date1i" />
				<p:calendar id="search-date1i"
					value="#{interviewSearchCDI.date1}" 
					pattern="dd/MM/yyyy HH:mm"
					readonlyInput="true" navigator="true" 
					yearRange="c-100:c+100"
					locale="pt" size="35" />

				<p:outputLabel value="Segunda Data: " for="search-date2i" />
				<p:calendar id="search-date2i"
					value="#{interviewSearchCDI.date2}" 
					pattern="dd/MM/yyyy HH:mm"
					readonlyInput="true" navigator="true" 
					yearRange="c-100:c+100"
					locale="pt" size="35" />

				<p:outputLabel value="Id: " for="search-idi" />
				<p:inputText id="search-idi" value="#{interviewSearchCDI.id}"
					size="35" />

				<p:outputLabel value="Data ocupada? " for="search-resulti" />
				<p:inputText id="search-resulti" 
					value="#{interviewSearchCDI.result}"
					size="35" />

			</h:panelGrid>

			<p:dataTable emptyMessage="Não foram encontradas entrevistas." 
				var="i" value="#{interviewSearchCDI.ilist}">
				<f:facet name="header">Listagem entrevistas</f:facet>
				<p:column headerText="Data">
					<h:outputText value="#{i.date}" />
				</p:column>
				<p:column headerText="Passada?">
					<h:outputText value="#{i.carriedOut}" />
				</p:column>
				<p:column headerText="Feedback">
					<h:outputText value="#{i.feedback}" />
				</p:column>
				<p:column headerText="Agendada por">
					<h:outputText value="#{i.scheduledBy.firstName}" />
				</p:column>
				<p:column headerText="Guião">
					<h:outputText value="#{i.script.title}" />
				</p:column>
				<p:column headerText="Candidatura">
					<h:outputText value="#{i.submission.candidate.firstName}" />
				</p:column>
				<p:column headerText="1º Entrevistador">
					<h:outputText value="#{i.interviewers.get(0).firstName}" />
				</p:column>
			</p:dataTable>

		</h:form>

	</ui:define>

</ui:composition>