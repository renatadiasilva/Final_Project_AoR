<ui:composition template="../../../WEB-INF/template/Layout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="titulo">
	Admin - Gestão de estilos - #{styleSessionManagement.companyName}
	</ui:define>

	<ui:define name="contents">

		<h1>Novo Estilo</h1>

		<h:form>

			<h:panelGroup>

				<h:panelGrid columns="2" style="width:100%">

					<h:panelGroup style="width:100%">
						<p:outputLabel value="Nome do estilo" for="new-style-title" />
						<p:inputText id="new-style-title" value="#{newStyleCDI.styleName}"
							required="true" requiredMessage="Insíra um título."
							style="width:100%" />
					</h:panelGroup>

					<h:panelGroup style="width:100%">
						<p:outputLabel value="Nome da Empresa" for="new-style-name" />
						<p:inputText id="new-style-name"
							value="#{newStyleCDI.companyName}" required="true"
							requiredMessage="Insira um nome." style="width:100%" />
					</h:panelGroup>

				</h:panelGrid>

				<h:panelGroup style="width:100%">
					<p:outputLabel value="Descrição da Empresa"
						for="new-style-description" />
					<p:inputTextarea id="new-style-description" cols="3"
						value="#{newStyleCDI.companyDescritpion}" required="true"
						requiredMessage="Insira uma Descrição." style="width:100%" />
				</h:panelGroup>

				<h:panelGroup style="width:100%">

					<p:outputLabel value="Breve descrição (footer)"
						for="new-style-footer" />
					<p:inputText id="new-style-footer"
						value="#{newStyleCDI.footerMessage}" required="true"
						requiredMessage="Insíra uma descrição." style="width:100%" />

				</h:panelGroup>

				<h:panelGrid columns="2">

					<h:panelGroup>
						<p:outputLabel value="Cor Primária" />
						<p:colorPicker value="#{newStyleCDI.primaryColor}" mode="inline" />
					</h:panelGroup>

					<h:panelGroup>
						<p:outputLabel value="Cor Secundária" />
						<p:colorPicker value="#{newStyleCDI.secondaryColor}" mode="inline" />
					</h:panelGroup>

				</h:panelGrid>

			</h:panelGroup>
			<br />
			<br />
			<p:commandButton id="action-button" value="Continuar para Logo"
				icon="ui-icon-folder-open"
				actionListener="#{newStyleCDI.newStyle()}"
				onclick="PF('uploadLogo').show();" />

		</h:form>

		<h:form>

			<p:dialog header="Logotipo" widgetVar="uploadLogo" draggable="false"
				resizable="false" modal="true">

				<p:messages id="dialogMessages" />

				<p:fileUpload id="file-upload" update="@all"
					label="Escolha o logotipo (*.gif, *.jpg, *.png)"
					uploadLabel="Submeter logo" cancelLabel="Cancelar" required="true"
					requiredMessage="Submeta um logotipo."
					fileUploadListener="#{newStyleCDI.uploadLogo}" mode="advanced"
					dragDropSupport="true" sizeLimit="100000" fileLimit="1"
					invalidSizeMessage="Ficheiro demaisado grande."
					invalidFileMessage="Só são permitidos os formatos .gif, .jpg e .png"
					allowTypes="/(\.|\/)(gif|jpg|png)$/" />

				<p:commandButton value="Fechar" onclick="PF('uploadLogo').hide();"
					icon="ui-icon-close" style="width:100%" />

			</p:dialog>
		</h:form>
		<br />
		<br />
		<h:form>
			<p:dataTable var="style" value="#{viewStylesCDI.styles}"
				emptyMessage="Não existem estilos">

				<f:facet name="header">Estilos</f:facet>

				<p:column>
					<p:outputLabel value="#{style.styleTitle}" />
				</p:column>

				<p:column>
					<p:commandButton value="Apagar o estilo"
						actionListener="#{viewStylesCDI.deleteStyle(style)}"
						icon="ui-icon-trash" style="width:100%" ajax="false" />
				</p:column>

				<p:column>
					<p:commandButton rendered="#{!style.userDefaultStyle}"
						value="Marcar como estilo padrão"
						actionListener="#{viewStylesCDI.newDefaultStyle(style)}"
						icon="ui-icon-image" style="width:100%" ajax="false" />

					<p:commandButton rendered="#{style.userDefaultStyle}"
						value="Estilo padrão. Desmarcar?"
						actionListener="#{viewStylesCDI.unsetDefault(style)}"
						icon="ui-icon-cancel" style="width:100%" ajax="false" />
				</p:column>

			</p:dataTable>
		</h:form>
	</ui:define>

</ui:composition>